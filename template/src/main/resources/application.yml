{% if asyncapi.hasServers() %}
  {% for serverName, server in asyncapi.servers() %}
    {% if server.protocol() === 'amqp' %}
  amqp:
    broker:
      host: localhost
      port: 5672
      username: guest
      password: guest
    exchange:
      {% for channelName, channel in asyncapi.channels() %}
        {% if channel.hasPublish() %}
      {{channel.x-service-name()}}: {{channelName}}
        {% endif %}
      {% endfor %}
    queue:
      {% for channelName, channel in asyncapi.channels() %}
        {% if channel.hasSubscribe() %}
      {{channel.x-service-name()}}: {{channelName}}
        {% endif %}
      {% endfor %}
    {% endif %}
    {% if server.protocol() === 'mqtt' %}
  mqtt:
    broker:
      host: tcp://{{server.url()}}
      port: {{server.variables(port).defaultValue()}}
      username:
      password:
    topic:
      {% for channelName, channel in asyncapi.channels() %}
      {{channel.x-service-name()}}Topic: {{channelName}}
      {% endfor %}
    {% endif %}
  {% endfor %}
{% endif %}
